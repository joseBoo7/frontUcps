(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c30a2f3e"],{"228a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("loader",{attrs:{object:"#ffffff",color1:"#ffffff",color2:"#ffffff",time:"100",size:"5",speed:"2",bg:"#5e151d",objectbg:"#999793",opacity:"100",name:e.selected,disableScrolling:"false"}}),t("div",{staticClass:"container",staticStyle:{"min-height":"150px"}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("h1",[t("b-icon",{attrs:{icon:"person-check"}}),e._v(" Gestión de usuarios ("+e._s(e.rows)+") ")],1)]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"container col-12"},[t("div",[t("b-row",[t("b-col",[t("b-form-select",{attrs:{options:[{value:"AU",text:"Todos los usuarios"},{value:"NE",text:"Usuarios no matriculados"}]},on:{change:e.filtro},model:{value:e.filtroSelect,callback:function(t){e.filtroSelect=t},expression:"filtroSelect"}})],1),t("b-col",{staticClass:"mb-3"},[t("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0"},[t("b-input-group-prepend",{attrs:{"is-text":""}},[t("b-icon",{attrs:{icon:"search"}})],1),t("b-form-input",{attrs:{placeholder:"Buscar",type:"text"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)],1),t("b-table",{attrs:{striped:"",responsive:"",stacked:"lg",items:e.items,fields:e.fields,id:"my-table","per-page":e.perPage,"current-page":e.currentPage,keyword:e.keyword},scopedSlots:e._u([{key:"cell(rols)",fn:function(a){return[t("div",[t("b-icon-person-lines-fill",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Roles",expression:"'Roles'",modifiers:{hover:!0,top:!0}}],staticClass:"mx-1",attrs:{type:"button",size:"sm"},on:{click:function(t){return e.toRols(a.item.id)}}}),t("span",[e._v(e._s(a.item.countRoles))])],1)]}},{key:"cell(state)",fn:function(a){return[t("b-badge",{attrs:{pill:"",variant:e.returnColor(a.item.state)}},[e._v(e._s(e.returnData(a.item.state)))])]}},{key:"cell(actions)",fn:function(a){return[t("b-icon-trash",{staticClass:"mx-1",attrs:{type:"button",size:"sm"},on:{click:function(t){return e.modalDelete(a.item)}}})]}}])}),t("b-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{pills:"","total-rows":e.items.length,"per-page":e.perPage,"aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])])])]),t("div",[t("b-modal",{attrs:{scrollable:"",centered:"",title:"Usuario"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("div",{staticClass:"w-100"},[t("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.saveEditItem(e.data)}}},[e._v(" Enviar ")]),t("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.exit()}}},[e._v(" Cancelar ")])])]},proxy:!0}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("b-container",{attrs:{fluid:""}},[t("form",[t("b-alert",{attrs:{show:e.dismissCountDown,variant:"danger"},on:{"dismiss-count-down":e.countDownChanged}},[t("strong",[e._v("Error. "+e._s(e.error)+",")]),e._v(" ocultando en "+e._s(e.dismissCountDown)+" segundos... ")]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Nombre")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"emailHelp",placeholder:"Ingrese su nombre",required:""},domProps:{value:e.data.name},on:{input:function(t){t.target.composing||e.$set(e.data,"name",t.target.value)}}})]),t("div",{staticClass:"form-group my-3"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Apellido Paterno")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.lastnameFather,expression:"data.lastnameFather"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingrese su apellido",required:""},domProps:{value:e.data.lastnameFather},on:{input:function(t){t.target.composing||e.$set(e.data,"lastnameFather",t.target.value)}}})]),t("div",{staticClass:"form-group my-3"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Apellido Materno")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.lastnameMother,expression:"data.lastnameMother"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingrese su apellido",required:""},domProps:{value:e.data.lastnameMother},on:{input:function(t){t.target.composing||e.$set(e.data,"lastnameMother",t.target.value)}}})]),t("div",{staticClass:"form-group my-1"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Fecha nacimiento")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.dateBirth,expression:"data.dateBirth"}],staticClass:"form-control",attrs:{type:"date",placeholder:"Ingrese fecha nacimiento",required:""},domProps:{value:e.data.dateBirth},on:{input:function(t){t.target.composing||e.$set(e.data,"dateBirth",t.target.value)}}})])],1)])],1)],1),t("div",[t("b-modal",{attrs:{centered:"",title:"Mensaje"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[t("div",{staticClass:"w-100"},[t("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.deleteItem(e.dataDelete)}}},[e._v(" Aceptar ")]),t("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.exitDelete()}}},[e._v(" Cancelar ")])])]},proxy:!0}]),model:{value:e.showDelete,callback:function(t){e.showDelete=t},expression:"showDelete"}},[t("b-container",{attrs:{fluid:""}},[t("h5",{staticClass:"text-center"},[e._v(" ¿Seguro que desea eliminar a "),t("b",[e._v(e._s(e.data.username))]),e._v("? ")])])],1)],1)],1)},o=[],r=(a("14d9"),a("0759")),i=a("7386"),n={components:{BIcon:r["a"],BIconArrowUp:i["eb"],BIconArrowDown:i["x"]},data:()=>({filtroSelect:"AU",selected:"",keyword:"",perPage:10,currentPage:1,dataDelete:"",error:"",dismissSecs:2,dismissCountDown:0,showDismissibleAlert:!1,show:!1,showDelete:!1,data:{id:-1,username:"",name:"",lastnameFather:"",lastnameMother:"",countRoles:null,email:"",dni:"",dateBirth:"",state:""},estados:[{value:!1,name:"Activo"},{value:!0,name:"Inactivo"}],rulesCampo:[e=>!!e||"Campo requerido"],page:{title:"Categorias"},breadcrumbs:[{text:"Categorías",disabled:!1,to:"#"},{text:"Todos las Categorías",disabled:!0}],fields:[{key:"username",label:"Usuario"},{key:"name",label:"Nombres"},{key:"lastnameFather",label:"Apellido paterno"},{key:"lastnameMother",label:"Apellido materno"},{key:"rols",label:"Roles"},{key:"state",label:"Estado"},{key:"actions",label:"Acciones"}],dialog:!1,search:"",desserts:[],editedIndex:-1,editedItem:{id:null,name:"",props:{deleted:Boolean},timestamp:""},submitted:!1,defaultItem:{id:null,name:"",props:{deleted:Boolean},timestamp:""}}),created(){this.initialize()},computed:{rows(){return this.desserts.length},items(){return this.currentPage=1,this.keyword?this.desserts.filter(e=>e.username.toLowerCase().includes(this.keyword.toLowerCase())||e.name.toLowerCase().includes(this.keyword.toLowerCase())||e.lastnameFather.toLowerCase().includes(this.keyword.toLowerCase())||e.lastnameMother.toLowerCase().includes(this.keyword.toLowerCase())):this.desserts}},methods:{async filtro(){this.selected="circular",await this.$axios.get("/person?filter="+this.filtroSelect,{headers:{Authorization:"Bearer "+localStorage.token}}).then(e=>{var t=[];for(var a in e.data){var s={username:e.data[a].username,email:e.data[a].email,dni:e.data[a].dni,dateBirth:e.data[a].dateBirth,state:e.data[a].state,name:e.data[a].name,lastnameFather:e.data[a].lastnameFather,lastnameMother:e.data[a].lastnameMother,countRoles:e.data[a].countRoles,id:e.data[a].id};t.push(s)}this.desserts=t,this.selected=""}).catch(e=>{this.$errorQuery(e)})},returnData(e){if("A"===e)return"Activo"},returnColor(e){if("A"===e)return"success"},toRols(e){this.$router.push("/users/data/"+e)},countDownChanged(e){this.dismissCountDown=e},showAlert(e){this.error=e,this.dismissCountDown=this.dismissSecs},exit(){this.show=!1},exitDelete(){this.showDelete=!1,this.data.username=""},modalDelete(e){this.showDelete=!0,this.dataDelete=e,this.data.username=e.username},login(){this.$router.push("/")},register(){this.$router.push("register")},async initialize(){this.selected="circular",await this.$axios.get("/person",{headers:{Authorization:"Bearer "+localStorage.token}}).then(e=>{var t=[];for(var a in e.data){var s={username:e.data[a].username,email:e.data[a].email,dni:e.data[a].dni,dateBirth:e.data[a].dateBirth,state:e.data[a].state,name:e.data[a].name,lastnameFather:e.data[a].lastnameFather,lastnameMother:e.data[a].lastnameMother,countRoles:e.data[a].countRoles,id:e.data[a].id};t.push(s)}this.desserts=t,this.selected=""}).catch(e=>{this.$errorQuery(e)})},async dateItem(e){this.show=!0;let t=await this.$axios.get("/person/edit?id="+e.id,{headers:{Authorization:"Bearer "+localStorage.token}});this.data.id=t.data.id,this.data.username=t.data.username,this.data.name=t.data.name,this.data.lastnameFather=t.data.lastnameFather,this.data.lastnameMother=t.data.lastnameMother,this.data.email=t.data.email,this.data.dni=t.data.dni,this.data.dateBirth=t.data.dateBirth,this.data.state=t.data.state},async saveEditItem(e){if(-1!=e.id)try{await this.$axios.post("/person/edit",this.data,{headers:{Authorization:"Bearer "+localStorage.token}}).then(e=>{this.$message.success(e.data.content),this.show=!1,this.initialize()}).catch(e=>{this.showAlert(e.response.data.content)})}catch(t){console.log(t)}},async deleteItem(e){if(this.showDelete=!1,""!=e)try{await this.$axios.get("/person/delete?id="+e.id,{headers:{Authorization:"Bearer "+localStorage.token}}).then(e=>{this.$message.success(e.data.content),this.initialize()})}catch(t){this.$message.error("Error!"),console.log(t)}}}},l=n,d=(a("4bd0"),a("2877")),c=Object(d["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},"2f18":function(e,t,a){},"4bd0":function(e,t,a){"use strict";a("2f18")}}]);
//# sourceMappingURL=chunk-c30a2f3e.1c704fb9.js.map