(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c0eb27"],{"0b75":function(t,e,a){"use strict";a("90c8")},1439:function(t,e,a){"use strict";a("280c")},2532:function(t,e,a){"use strict";var r=a("23e7"),n=a("e330"),o=a("5a34"),s=a("1d80"),i=a("577e"),c=a("ab13"),l=n("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(i(s(this)),i(o(t)),arguments.length>1?arguments[1]:void 0)}})},"280c":function(t,e,a){},"4de4":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").filter,o=a("1dde"),s=o("filter");r({target:"Array",proto:!0,forced:!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,a){var r=a("da84"),n=a("44e7"),o=r.TypeError;t.exports=function(t){if(n(t))throw o("The method doesn't accept regular expressions");return t}},"90c8":function(t,e,a){},ab13:function(t,e,a){var r=a("b622"),n=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,"/./"[t](e)}catch(r){}}return!1}},b0c0:function(t,e,a){var r=a("83ab"),n=a("5e77").EXISTS,o=a("e330"),s=a("9bf2").f,i=Function.prototype,c=o(i.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(l.exec),u="name";r&&!n&&s(i,u,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(t){return""}}})},ddae:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{object:"#ffffff",color1:"#ffffff",color2:"#ffffff",time:"100",size:"5",speed:"2",bg:"#5e151d",objectbg:"#999793",opacity:"100",name:t.selected,disableScrolling:"false"}}),a("div",{staticClass:"container",staticStyle:{"min-height":"150px"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("h1",[a("b-icon",{attrs:{icon:"bell"}}),t._v(" Alertas")],1)]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"container col-12"},[a("div",[a("b-row",[a("b-col"),a("b-col",{staticClass:"mb-3"},[a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0"},[a("b-input-group-prepend",{attrs:{"is-text":""}},[a("b-icon",{attrs:{icon:"search"}})],1),a("b-form-input",{attrs:{placeholder:"Buscar",type:"text"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1)],1),a("b-table",{attrs:{bordered:"",striped:"",responsive:"",stacked:"lg",items:t.items,fields:t.fields,"per-page":t.perPage,"current-page":t.currentPage,keyword:t.keyword},scopedSlots:t._u([{key:"cell(date)",fn:function(e){return[a("p",{domProps:{textContent:t._s(t.fecha(e.item.date))}})]}},{key:"cell(see)",fn:function(e){return[a("b-button",{attrs:{size:"sm",pill:"",variant:"info"},on:{click:function(a){return t.dateItem(e.item)}}},[a("b-icon-eye")],1)]}},{key:"cell(action)",fn:function(e){return[a("b-button",{attrs:{size:"sm",pill:"",variant:"danger"},on:{click:function(a){return t.marcar(e.item)}}},[t._v("Observar")])]}}])}),a("b-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{pills:"","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])]),a("div",[a("b-modal",{staticClass:"modal-lg",attrs:{scrollable:"",centered:"",title:"Información"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("b-alert",{staticClass:"mb-1 py-1",attrs:{show:"",variant:"primary"}},[a("b-form-group",{staticClass:"m-0",attrs:{label:"Validaciones:"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.ariaDescribedby;return[a("b-form-radio-group",{attrs:{id:"checkbox-group-1",options:t.dataValidate.events,"aria-describedby":r,name:"flavour-1"},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}})]}}])})],1),a("button",{staticClass:"btn form-control my-2 mt-0",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button",disabled:t.stateCheck(t.selectedList)},on:{click:function(e){return t.send()}}},[t._v(" Validar ")]),a("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exit()}}},[t._v(" Cancelar ")])],1)]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("b-container",{attrs:{fluid:""}},["{}"!=JSON.stringify(t.data)?a("b-alert",{staticClass:"row",attrs:{show:"",variant:""}},[a("div",{staticClass:"col-7"},t._l(t.data,(function(e,r){return a("div",{key:r},["#"==e.type?a("div",{staticClass:"col"},[a("b",{staticStyle:{display:"flex","justify-content":"center"}},[t._v(t._s(e.name)+": "),a("a",{staticClass:"mb-3",attrs:{href:t.$urlFirebase+e.value+"?alt=media",target:"_blank"}},[a("b-icon",{attrs:{type:"button",icon:"link45deg"}})],1)]),a("b-overlay",{attrs:{show:t.showImage,variant:"light",opacity:0,blur:"2px",rounded:"sm"}},[a("b-img",{staticClass:"zoom objetfit",attrs:{center:"",src:t.$urlFirebase+e.value+"?alt=media",alt:"No se puede mostrar la imagen"}})],1)],1):t._e()])})),0),a("div",{staticClass:"col-5 mt-3"},[t.editForm?a("div",t._l(t.dataEdit,(function(e,r){return a("div",{key:r},[e.editable?a("div",[a("label",[a("b",[t._v(t._s(e.name))])]),a("b-form-input",{attrs:{type:"text",value:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"dato.value"}})],1):t._e()])})),0):a("div",t._l(t.data,(function(e,r){return a("div",{key:r},["#"!=e.type?a("label",[a("b",[t._v(t._s(e.name)+":")]),t._v(" "+t._s(e.value))]):t._e()])})),0),t.editForm?a("b-button",{staticClass:"w-100 mt-3",attrs:{variant:"warning"},on:{click:function(e){return t.formEditAdd()}}},[t._v(" Aceptar ")]):a("b-button",{staticClass:"w-100 mt-3",attrs:{variant:"primary"},on:{click:function(e){return t.formEdit()}}},[a("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),t._v(" Editar datos ")],1)],1)]):t._e()],1)],1)],1),a("div",[a("b-modal",{attrs:{centered:"",title:"Observar"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.observar()}}},[t._v(" Enviar observación ")]),a("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exitObserved()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.showObserved,callback:function(e){t.showObserved=e},expression:"showObserved"}},[a("b-container",{attrs:{fluid:""}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Comentario")]),a("b-form-textarea",{staticClass:"form-control",attrs:{placeholder:"Ingrese comentario",required:""},model:{value:t.dataObserved.content,callback:function(e){t.$set(t.dataObserved,"content",e)},expression:"dataObserved.content"}})],1)])],1)],1),a("div",[a("b-modal",{attrs:{centered:"",title:"Alerta"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"},[a("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.validarItem()}}},[t._v(" Aceptar ")]),a("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exitSend()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.showSend,callback:function(e){t.showSend=e},expression:"showSend"}},[a("b-container",{attrs:{fluid:""}},[a("h5",{staticClass:"text-center"},[t._v("¿Seguro que desea verificar?")])])],1)],1)],1)},n=[],o=a("1da1"),s=(a("96cf"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("b0c0"),{data:function(){return{showImage:!1,editForm:!1,showSend:!1,selectedList:null,selected:"",keyword:"",perPage:10,currentPage:1,dataValidate:{},show:!1,showObserved:!1,data:{},dataEdit:[],actions:[],dataObserved:{},fields:[{key:"index",label:"#",sortable:!0},{key:"name",label:"Tipo"},{key:"sender",label:"Autor"},{key:"personName",label:"Nombre"},{key:"date",label:"Fecha y hora",sortable:!0},{key:"see",label:"Ver"},{key:"action",label:"Acción"}],desserts:[]}},created:function(){this.initialize()},computed:{rows:function(){return this.desserts.length},items:function(){var t=this;return this.currentPage=1,this.keyword?this.desserts.filter((function(e){return e.name.toLowerCase().includes(t.keyword.toLowerCase())||e.sender.toLowerCase().includes(t.keyword.toLowerCase())||e.date.toLowerCase().includes(t.keyword.toLowerCase())})):this.desserts}},methods:{sleep:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))()},formEditAdd:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a={id:t.dataValidate.id,data:[]},t.editForm=!1,r=0;r<t.dataEdit.length;r++)t.dataEdit[r].editable&&(n={},n.id=t.dataEdit[r].id,n.label=t.dataEdit[r].value,a.data.push(n));return e.next=5,t.$axios.post("/alert/edit",a,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){t.$message.success(e.data.content)})).catch((function(e){t.$message.error(e.response.data.content),console.log(e)}));case 5:return e.next=7,t.$axios.get("/alert/view?id="+a.id,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){t.data=e.data.data})).catch((function(t){console.log(t)}));case 7:case"end":return e.stop()}}),e)})))()},formEdit:function(){this.editForm=!0},exitSend:function(){this.showSend=!1},send:function(){this.showSend=!0},stateCheck:function(t){return 0==t.length},fecha:function(t){return t.substring(0,10)+" ("+t.substring(11,16)+")"},validarItem:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dataValidate.event=t.selectedList,t.dataValidate.actions=null,e.next=4,t.$axios.post("/alert/validate",t.dataValidate,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){t.showSend=!1,t.show=!1,t.$message.success(e.data.content),t.initialize()})).catch((function(e){t.showSend=!1,t.show=!1,t.$message.error(e.response.data.content),console.log(e)}));case 4:case"end":return e.stop()}}),e)})))()},exit:function(){this.show=!1,this.initialize()},exitObserved:function(){this.showObserved=!1,this.initialize()},marcar:function(t){this.showObserved=!0,this.dataObserved={id:t.id,content:null}},observar:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/alert/observe",t.dataObserved,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){t.showObserved=!1,t.$message.success(e.data.content),t.initialize()})).catch((function(e){t.showObserved=!1,console.log(e)}));case 2:case"end":return e.stop()}}),e)})))()},initialize:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.selected="circular",e.next=3,t.$axios.get("/alert",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(e){var a=[],r=0;for(var n in e.data)e.data[n].index=r+1,a.push(e.data[n]),r++;t.desserts=a,t.selected=""})).catch((function(e){t.$errorQuery(e)}));case 3:case"end":return e.stop()}}),e)})))()},dateItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showImage=!0,e.selectedList=[],e.data={},e.editForm=!1,e.show=!0,a.next=7,e.$axios.get("/alert/view?id="+t.id,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){e.data=t.data.data,e.dataValidate=t.data,e.actions=t.data.actions,e.dataEdit=t.data.data})).catch((function(t){e.$errorQuery(t)}));case 7:return a.next=9,e.sleep(1e3);case 9:e.showImage=!1;case 10:case"end":return a.stop()}}),a)})))()}}}),i=s,c=(a("0b75"),a("1439"),a("2877")),l=Object(c["a"])(i,r,n,!1,null,"bad31502",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-15c0eb27.f7748d6b.js.map