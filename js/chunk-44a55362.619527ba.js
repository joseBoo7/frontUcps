(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44a55362"],{9558:function(t,e,a){"use strict";a("dc35")},9899:function(t,e,a){"use strict";a("bec9")},bec9:function(t,e,a){},dc35:function(t,e,a){},ddae:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("loader",{attrs:{object:"#ffffff",color1:"#ffffff",color2:"#ffffff",time:"100",size:"5",speed:"2",bg:"#5e151d",objectbg:"#999793",opacity:"100",name:t.selected,disableScrolling:"false"}}),e("div",{staticClass:"container",staticStyle:{"min-height":"150px"}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h1",[e("b-icon",{attrs:{icon:"bell"}}),t._v(" Alertas")],1)]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"container col-12"},[e("div",[e("b-row",[e("b-col"),e("b-col",{staticClass:"mb-3"},[e("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0"},[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("b-icon",{attrs:{icon:"search"}})],1),e("b-form-input",{attrs:{placeholder:"Buscar",type:"text"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1)],1),e("b-table",{attrs:{bordered:"",striped:"",responsive:"",stacked:"lg",items:t.items,fields:t.fields,"per-page":t.perPage,"current-page":t.currentPage,keyword:t.keyword},scopedSlots:t._u([{key:"cell(date)",fn:function(a){return[e("p",{domProps:{textContent:t._s(t.fecha(a.item.date))}})]}},{key:"cell(see)",fn:function(a){return[e("b-button",{attrs:{size:"sm",pill:"",variant:"info"},on:{click:function(e){return t.dateItem(a.item)}}},[e("b-icon-eye")],1)]}},{key:"cell(action)",fn:function(a){return[e("b-button",{attrs:{size:"sm",pill:"",variant:"danger"},on:{click:function(e){return t.marcar(a.item)}}},[t._v("Observar")])]}}])}),e("b-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{pills:"","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])]),e("div",[e("b-modal",{staticClass:"modal-lg",attrs:{scrollable:"",centered:"",title:"Información"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"w-100"},[e("b-alert",{staticClass:"mb-1 py-1",attrs:{show:"",variant:"primary"}},[e("b-form-group",{staticClass:"m-0",attrs:{label:"Validaciones:"},scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:a}){return[e("b-form-radio-group",{attrs:{id:"checkbox-group-1",options:t.dataValidate.events,"aria-describedby":a,name:"flavour-1"},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}})]}}])})],1),e("button",{staticClass:"btn form-control my-2 mt-0",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button",disabled:t.stateCheck(t.selectedList)},on:{click:function(e){return t.send()}}},[t._v(" Validar ")]),e("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exit()}}},[t._v(" Cancelar ")])],1)]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("b-container",{attrs:{fluid:""}},["{}"!=JSON.stringify(t.data)?e("b-alert",{staticClass:"row",attrs:{show:"",variant:""}},[e("div",{staticClass:"col-7"},t._l(t.data,(function(a,s){return e("div",{key:s},["#"==a.type?e("div",{staticClass:"col"},[e("b",{staticStyle:{display:"flex","justify-content":"center"}},[t._v(t._s(a.name)+": "),e("a",{staticClass:"mb-3",attrs:{href:t.$urlFirebase+a.value+"?alt=media",target:"_blank"}},[e("b-icon",{attrs:{type:"button",icon:"link45deg"}})],1)]),e("b-overlay",{attrs:{show:t.showImage,variant:"light",opacity:0,blur:"2px",rounded:"sm"}},[e("b-img",{staticClass:"zoom objetfit",attrs:{center:"",src:t.$urlFirebase+a.value+"?alt=media",alt:"No se puede mostrar la imagen"}})],1)],1):t._e()])})),0),e("div",{staticClass:"col-5 mt-3"},[t.editForm?e("div",t._l(t.dataEdit,(function(a,s){return e("div",{key:s},[a.editable?e("div",[e("label",[e("b",[t._v(t._s(a.name))])]),e("b-form-input",{attrs:{type:"text",value:a.value},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"dato.value"}})],1):t._e()])})),0):e("div",t._l(t.data,(function(a,s){return e("div",{key:s},["#"!=a.type?e("label",[e("b",[t._v(t._s(a.name)+":")]),t._v(" "+t._s(a.value))]):t._e()])})),0),t.editForm?e("b-button",{staticClass:"w-100 mt-3",attrs:{variant:"warning"},on:{click:function(e){return t.formEditAdd()}}},[t._v(" Aceptar ")]):e("b-button",{staticClass:"w-100 mt-3",attrs:{variant:"primary"},on:{click:function(e){return t.formEdit()}}},[e("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}}),t._v(" Editar datos ")],1)],1)]):t._e()],1)],1)],1),e("div",[e("b-modal",{attrs:{centered:"",title:"Observar"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"w-100"},[e("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.observar()}}},[t._v(" Enviar observación ")]),e("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exitObserved()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.showObserved,callback:function(e){t.showObserved=e},expression:"showObserved"}},[e("b-container",{attrs:{fluid:""}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Comentario")]),e("b-form-textarea",{staticClass:"form-control",attrs:{placeholder:"Ingrese comentario",required:""},model:{value:t.dataObserved.content,callback:function(e){t.$set(t.dataObserved,"content",e)},expression:"dataObserved.content"}})],1)])],1)],1),e("div",[e("b-modal",{attrs:{centered:"",title:"Alerta"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"w-100"},[e("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.validarItem()}}},[t._v(" Aceptar ")]),e("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exitSend()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.showSend,callback:function(e){t.showSend=e},expression:"showSend"}},[e("b-container",{attrs:{fluid:""}},[e("h5",{staticClass:"text-center"},[t._v("¿Seguro que desea verificar?")])])],1)],1)],1)},r=[],i=(a("14d9"),{data:()=>({showImage:!1,editForm:!1,showSend:!1,selectedList:null,selected:"",keyword:"",perPage:10,currentPage:1,dataValidate:{},show:!1,showObserved:!1,data:{},dataEdit:[],actions:[],dataObserved:{},fields:[{key:"index",label:"#",sortable:!0},{key:"name",label:"Tipo"},{key:"sender",label:"Autor"},{key:"personName",label:"Nombre"},{key:"date",label:"Fecha y hora",sortable:!0},{key:"see",label:"Ver"},{key:"action",label:"Acción"}],desserts:[]}),created(){this.initialize()},computed:{rows(){return this.desserts.length},items(){return this.currentPage=1,this.keyword?this.desserts.filter(t=>t.name.toLowerCase().includes(this.keyword.toLowerCase())||t.sender.toLowerCase().includes(this.keyword.toLowerCase())||t.date.toLowerCase().includes(this.keyword.toLowerCase())):this.desserts}},methods:{async sleep(t){return new Promise(e=>setTimeout(e,t))},async formEditAdd(){var t={id:this.dataValidate.id,data:[]};this.editForm=!1;for(var e=0;e<this.dataEdit.length;e++)if(this.dataEdit[e].editable){var a={};a.id=this.dataEdit[e].id,a.label=this.dataEdit[e].value,t.data.push(a)}await this.$axios.post("/alert/edit",t,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.$message.success(t.data.content)}).catch(t=>{this.$message.error(t.response.data.content),console.log(t)}),await this.$axios.get("/alert/view?id="+t.id,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.data=t.data.data}).catch(t=>{console.log(t)})},formEdit(){this.editForm=!0},exitSend(){this.showSend=!1},send(){this.showSend=!0},stateCheck(t){return 0==t.length},fecha(t){return t.substring(0,10)+" ("+t.substring(11,16)+")"},async validarItem(){this.dataValidate.event=this.selectedList,this.dataValidate.actions=null,await this.$axios.post("/alert/validate",this.dataValidate,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.showSend=!1,this.show=!1,this.$message.success(t.data.content),this.initialize()}).catch(t=>{this.showSend=!1,this.show=!1,this.$message.error(t.response.data.content),console.log(t)})},exit(){this.show=!1,this.initialize()},exitObserved(){this.showObserved=!1,this.initialize()},marcar(t){this.showObserved=!0,this.dataObserved={id:t.id,content:null}},async observar(){await this.$axios.post("/alert/observe",this.dataObserved,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.showObserved=!1,this.$message.success(t.data.content),this.initialize()}).catch(t=>{this.showObserved=!1,console.log(t)})},async initialize(){this.selected="circular",await this.$axios.get("/alert",{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{var e=[],a=0;for(var s in t.data)t.data[s].index=a+1,e.push(t.data[s]),a++;this.desserts=e,this.selected=""}).catch(t=>{this.$errorQuery(t)})},async dateItem(t){this.showImage=!0,this.selectedList=[],this.data={},this.editForm=!1,this.show=!0,await this.$axios.get("/alert/view?id="+t.id,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.data=t.data.data,this.dataValidate=t.data,this.actions=t.data.actions,this.dataEdit=t.data.data}).catch(t=>{this.$errorQuery(t)}),await this.sleep(1e3),this.showImage=!1}}}),o=i,n=(a("9899"),a("9558"),a("2877")),l=Object(n["a"])(o,s,r,!1,null,"bad31502",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-44a55362.619527ba.js.map