(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d778b78"],{"078f":function(e,t,r){"use strict";r("e332")},2532:function(e,t,r){"use strict";var n=r("23e7"),o=r("e330"),a=r("5a34"),s=r("1d80"),i=r("577e"),c=r("ab13"),l=o("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~l(i(s(this)),i(a(e)),arguments.length>1?arguments[1]:void 0)}})},"408a":function(e,t,r){var n=r("e330");e.exports=n(1..valueOf)},"4de4":function(e,t,r){"use strict";var n=r("23e7"),o=r("b727").filter,a=r("1dde"),s=a("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},5018:function(e,t,r){"use strict";r("fc18")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("e330"),o=r("1d80"),a=r("577e"),s=r("5899"),i=n("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e){return function(t){var r=a(o(t));return 1&e&&(r=i(r,l,"")),2&e&&(r=i(r,u,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},"5a34":function(e,t,r){var n=r("da84"),o=r("44e7"),a=n.TypeError;e.exports=function(e){if(o(e))throw a("The method doesn't accept regular expressions");return e}},7156:function(e,t,r){var n=r("1626"),o=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var s,i;return a&&n(s=t.constructor)&&s!==r&&o(i=s.prototype)&&i!==r.prototype&&a(e,i),e}},"91a0":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"CoursesEnrolled"}},[r("div",{staticClass:"container",staticStyle:{"min-height":"150px"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-11"},[r("h1",[r("b-icon",{attrs:{icon:"people"}}),e._v(" Personas de "+e._s(e.desserts.name))],1)]),r("div",{staticClass:"col-1"},[r("h1",[r("b-icon",{attrs:{type:"button",icon:"arrow-return-left"},on:{click:e.toCourse}})],1)])])]),r("div",{staticClass:"card-body"},[r("b-row",[r("b-col",[r("EnrolledRegister",{attrs:{idCourse:e.id}})],1),r("b-col",{staticClass:"mb-3"},[r("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0"},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("b-icon",{attrs:{icon:"search"}})],1),r("b-form-input",{attrs:{placeholder:"Buscar",type:"text"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)],1),0!=e.desserts.list.length?r("div",[r("b-table",{attrs:{striped:"",responsive:"",stacked:"lg",items:e.items,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,keyword:e.keyword},scopedSlots:e._u([{key:"cell(names)",fn:function(t){return[r("p",[e._v(" "+e._s(t.item.lastnameFather+" "+t.item.lastnameMother+", "+t.item.name)+" ")])]}},{key:"cell(foulPercentage)",fn:function(t){return[null==t.item.foulPercentage?r("b",[e._v("-")]):t.item.foulPercentage>30?r("b",{staticClass:"text-danger"},[e._v(" "+e._s(t.item.foulPercentage+"%")+" ")]):r("b",{staticClass:"text-success"},[e._v(e._s(t.item.foulPercentage+"%"))])]}}],null,!1,3827837736)}),r("b-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{pills:"","total-rows":e.items.length,"per-page":e.perPage,"aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),r("center",[r("b-button",{attrs:{variant:"primary"},on:{click:e.exportExcel}},[e._v("Reporte Asistencia")])],1)],1):r("div",[r("hr"),e._m(0)])],1)])])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("em",[r("p",{staticClass:"text-center"},[e._v("No hay datos en esta tabla")])])}],a=r("1da1"),s=(r("96cf"),r("4de4"),r("d3b7"),r("caad"),r("2532"),r("b0c0"),r("25ca")),i=r("3e8f"),c=r("d485"),l=r("3f13"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"EnrolledRegister"}},[r("button",{staticClass:"btn mb-3",staticStyle:{"background-color":"#1d425e",color:"white"},on:{click:function(t){return e.addPerson()}}},[e._v(" Agregar persona ")]),r("div",[r("b-modal",{attrs:{scrollable:"",centered:"",title:"Registro de personal"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[r("div",{staticClass:"w-100"},[r("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.addData()}}},[e._v(" Enviar ")]),r("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(t){return e.exit()}}},[e._v(" Cancelar ")])])]},proxy:!0}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("b-container",{attrs:{fluid:""}},[r("AlertError",{ref:"error"}),r("b-overlay",{attrs:{show:e.showOverlay,rounded:"sm"}},[r("b-form-group",{staticClass:"my-2",attrs:{label:"Buscar usuario:"}},[r("b-input-group",[null==e.selected?r("b-form-input",{attrs:{type:"text",placeholder:"Ingrese nombre"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}):r("b-form-input",{attrs:{type:"text",placeholder:"Ingrese nombre",disabled:"",value:e.selected.names}}),null!=e.selected?r("b-input-group-append",{on:{click:function(t){return e.deselect()}}},[r("b-form-checkbox",{attrs:{button:"","button-variant":"primary"}},[r("b-icon-x")],1)],1):r("b-input-group-append",[r("b-button",{on:{click:function(t){return e.inquiry()}}},[r("b-icon-search")],1)],1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:null==e.selected&&0!=e.options.length,expression:"selected == null && options.length != 0"}]},[r("b-form-select",{attrs:{options:e.options,"select-size":e.tamOptions(e.options.length)},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),r("b-form-group",{staticClass:"my-2",attrs:{label:"Seleccionar rol:"}},[r("b-form-select",{attrs:{options:e.optionsRole},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}})],1)],1)],1)],1)])},d=[],f=(r("a9e3"),r("2df4")),p={name:"EnrolledRegister",components:{AlertError:f["a"]},props:{idCourse:{type:String,default:null}},data:function(){return{showOverlay:!1,show:!1,selected:null,selectedRole:null,text:"",options:[],optionsRole:[],addPersonData:{}}},created:function(){this.ListRoles()},methods:{tamOptions:function(e){return 1==e?2:e},addData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addPersonData.personId=e.selected.id,e.addPersonData.roleId=Number(e.selectedRole),t.next=4,e.$axios.post("/academic/course/"+e.idCourse+"/enrolled-register",e.addPersonData,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){e.show=!1,e.$message.success(t.data.content),e.$parent.initialize()})).catch((function(t){console.log(t),e.$refs.error.showAlert(t.response.data.content)}));case 4:case"end":return t.stop()}}),t)})))()},ListRoles:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/academic/course/"+e.idCourse+"/enrolled-register",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){e.optionsRole=t.data})).catch((function(t){e.$errorQuery(t)}));case 2:case"end":return t.stop()}}),t)})))()},inquiry:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showOverlay=!0,e.options=[],e.inquiryValided();case 3:case"end":return t.stop()}}),t)})))()},inquiryValided:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/person/search?names="+e.text,{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){for(var r=0;r<t.data.length;r++){var n={};n.text=t.data[r].names+" ("+t.data[r].email+")",n.value=t.data[r],e.options.push(n)}e.showOverlay=!1})).catch((function(t){e.$errorQuery(t)}));case 2:case"end":return t.stop()}}),t)})))()},deselect:function(){this.options=[],this.selected=null,this.text=null},addPerson:function(){this.text="",this.selected=null,this.selectedRole=null,this.addPersonData={},this.show=!0,this.options=[]},exit:function(){this.show=!1}}},h=p,b=(r("5018"),r("2877")),m=Object(b["a"])(h,u,d,!1,null,null,null),g=m.exports;s["b"](i),s["c"].set_readable(c["Readable"]),s["a"](l);var v={name:"CoursesEnrolled",components:{EnrolledRegister:g},props:{id:{type:String,default:""}},data:function(){return{keyword:"",perPage:10,currentPage:1,desserts:{list:[]},fields:[{key:"number",label:"#"},{key:"names",label:"Apellidos, Nombres"},{key:"role",label:"Rol"},{key:"foulPercentage",label:"Inasistencia",sortable:!0},{key:"phone",label:"Celular"}]}},created:function(){this.initialize()},computed:{rows:function(){return this.desserts.list.length},items:function(){var e=this;return this.currentPage=1,this.keyword?this.desserts.list.filter((function(t){return t.name.toLowerCase().includes(e.keyword.toLowerCase())||t.lastnameFather.toLowerCase().includes(e.keyword.toLowerCase())||t.lastnameMother.toLowerCase().includes(e.keyword.toLowerCase())||t.role.toLowerCase().includes(e.keyword.toLowerCase())})):this.desserts.list}},methods:{toCourse:function(){this.$router.go(-1)},exportExcel:function(){for(var e=this.desserts.list,t=0;t<e.length;t++)delete e[t].id,delete e[t].number;var r=s["d"].json_to_sheet(e);r["A1"].v="NOMBRES",r["B1"].v="AP. PATERNO",r["C1"].v="AP. MATERNO",r["D1"].v="ROL",r["E1"].v="INASISTENCIA(%)",r["F1"].v="CELULAR";var n=s["d"].book_new(),o="asistencia";s["d"].book_append_sheet(n,r,o),s["e"](n,this.desserts.name+"_ReporteExcel.xlsx")},initialize:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/academic/course/"+e.id+"/enrolled",{headers:{Authorization:"Bearer ".concat(localStorage.token)}}).then((function(t){e.desserts=t.data;for(var r=0;r<e.desserts.list.length;r++)e.desserts.list[r].number=r+1})).catch((function(t){e.$errorQuery(t)}));case 2:case"end":return t.stop()}}),t)})))()}}},w=v,y=(r("078f"),Object(b["a"])(w,n,o,!1,null,null,null));t["default"]=y.exports},a9e3:function(e,t,r){"use strict";var n=r("83ab"),o=r("da84"),a=r("e330"),s=r("94ca"),i=r("6eeb"),c=r("1a2d"),l=r("7156"),u=r("3a9b"),d=r("d9b5"),f=r("c04e"),p=r("d039"),h=r("241c").f,b=r("06cf").f,m=r("9bf2").f,g=r("408a"),v=r("58a8").trim,w="Number",y=o[w],x=y.prototype,k=o.TypeError,C=a("".slice),R=a("".charCodeAt),_=function(e){var t=f(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,r,n,o,a,s,i,c,l=f(e,"number");if(d(l))throw k("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),t=R(l,0),43===t||45===t){if(r=R(l,2),88===r||120===r)return NaN}else if(48===t){switch(R(l,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+l}for(a=C(l,2),s=a.length,i=0;i<s;i++)if(c=R(a,i),c<48||c>o)return NaN;return parseInt(a,n)}return+l};if(s(w,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var N,P=function(e){var t=arguments.length<1?0:y(_(e)),r=this;return u(x,r)&&p((function(){g(r)}))?l(Object(t),r,P):t},A=n?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),I=0;A.length>I;I++)c(y,N=A[I])&&!c(P,N)&&m(P,N,b(y,N));P.prototype=x,x.constructor=P,i(o,w,P)}},ab13:function(e,t,r){var n=r("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},e332:function(e,t,r){},fc18:function(e,t,r){}}]);
//# sourceMappingURL=chunk-4d778b78.9cd395ae.js.map