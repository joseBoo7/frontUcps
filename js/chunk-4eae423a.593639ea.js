(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eae423a"],{"50aa":function(t,e,s){},"62c4":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container",staticStyle:{"min-height":"150px"}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-11"},[e("h1",[e("b-icon",{attrs:{icon:"person-lines-fill"}}),t._v(" Roles de "+t._s(t.personName)+" ")],1)]),e("div",{staticClass:"col-1"},[e("h1",[e("b-icon",{attrs:{type:"button",icon:"arrow-return-left"},on:{click:t.toUsers}})],1)])])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"container col-12"},[e("div",[e("UserRolesRegister",{attrs:{id:t.id}}),e("b-table",{attrs:{striped:"",responsive:"",stacked:"lg",items:t.desserts,fields:t.fields},scopedSlots:t._u([{key:"cell(relationState)",fn:function(s){return[e("b-badge",{attrs:{pill:"",variant:t.returnColor(s.item.relationState)}},[t._v(t._s(t.returnData(s.item.relationState)))])]}},{key:"cell(actions)",fn:function(s){return[e("b-icon-trash",{staticClass:"mx-1",attrs:{type:"button",size:"sm"},on:{click:function(e){return t.modalDelete(s.item)}}})]}}])})],1)])])])]),e("div",[e("b-modal",{attrs:{centered:"",title:"Mensaje"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"w-100"},[e("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.deleteItem(t.dataDelete)}}},[t._v(" Aceptar ")]),e("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exitDelete()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.showDelete,callback:function(e){t.showDelete=e},expression:"showDelete"}},[e("b-container",{attrs:{fluid:""}},[e("h5",{staticClass:"text-center"},[t._v(" Â¿Seguro que desea quitar el rol "),e("b",[t._v(t._s(t.data.name))]),t._v("? ")])])],1)],1)])},a=[],r=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"RolesRegister"}},[e("button",{staticClass:"btn mb-3",staticStyle:{"background-color":"#1d425e",color:"white"},on:{click:function(e){return t.addRol()}}},[t._v(" Agregar Rol ")]),e("div",[e("b-modal",{attrs:{scrollable:"",centered:"",title:"Agregar Rol"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("div",{staticClass:"w-100"},[e("button",{staticClass:"btn form-control my-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.saveAddItem()}}},[t._v(" Agregar ")]),e("button",{staticClass:"btn form-control",staticStyle:{"background-color":"rgb(119, 35, 45)",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.exit()}}},[t._v(" Cancelar ")])])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("b-container",{attrs:{fluid:""}},[e("form",[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Seleccionar rol")]),e("b-form-select",{staticClass:"form-control",attrs:{options:t.roles,required:""},model:{value:t.data.idTwo,callback:function(e){t.$set(t.data,"idTwo",e)},expression:"data.idTwo"}})],1)])])],1)],1)])}),i=[],n={name:"RolesRegister",props:{id:{type:String,default:null}},data(){return{show:!1,data:{idTwo:null,idOne:null},roles:[]}},methods:{exit(){this.show=!1},addRol(){this.listRols(),this.data={idTwo:null,idOne:parseInt(this.id)},this.show=!0},async listRols(){await this.$axios.get("/person/"+this.id+"/role-register?id=",{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.roles=t.data}).catch(t=>{console.log(t)})},async saveAddItem(){await this.$axios.get("/person/"+this.id+"/role-register?id="+this.data.idTwo,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.show=!1,this.$message.success(t.data.content),this.$parent.initialize()}).catch(t=>{console.log(t),this.show=!1,this.$message.error("Error. Seleccione rol valido.")})}}},l=n,c=(s("c705"),s("2877")),d=Object(c["a"])(l,r,i,!1,null,null,null),u=d.exports,h={components:{UserRolesRegister:u},props:{id:{type:String,default:null}},data:()=>({dataDelete:"",showDelete:!1,personName:"",data:{id:-1,name:"",lastnameFather:"",lastnameMother:"",dateRegister:""},fields:[{key:"roleName",label:"Nombre"},{key:"relationState",label:"Estado"},{key:"actions",label:"Acciones"}],desserts:[]}),created(){this.initialize()},methods:{returnData(t){if("A"===t)return"Activo"},returnColor(t){if("A"===t)return"success"},exitDelete(){this.showDelete=!1,this.data.name=""},modalDelete(t){this.showDelete=!0,this.dataDelete=t,this.data.name=t.roleName},toUsers(){this.$router.push("/person")},async initialize(){await this.$axios.get("/person/"+this.id+"/role",{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.personName=t.data.name;var e=[];for(var s in t.data.roles)e.push(t.data.roles[s]);this.desserts=e}).catch(t=>{this.$errorQuery(t)})},async deleteItem(t){if(this.showDelete=!1,""!=t&null!=this.id)try{await this.$axios.get("/person/"+this.id+"/role-delete?id="+t.roleId,{headers:{Authorization:"Bearer "+localStorage.token}}).then(t=>{this.$message.success(t.data.content),this.initialize()})}catch(e){this.$message.error("Error!"),console.log(e)}}}},b=h,m=(s("bcee"),Object(c["a"])(b,o,a,!1,null,null,null));e["default"]=m.exports},"936f":function(t,e,s){},bcee:function(t,e,s){"use strict";s("936f")},c705:function(t,e,s){"use strict";s("50aa")}}]);
//# sourceMappingURL=chunk-4eae423a.593639ea.js.map