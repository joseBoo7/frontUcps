(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2449acfe"],{"0728":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"dashboard"}},[e("loader",{attrs:{object:"#ffffff",color1:"#ffffff",color2:"#ffffff",time:"100",size:"5",speed:"2",bg:"#5e151d",objectbg:"#999793",opacity:"100",name:t.selected,disableScrolling:"false"}}),e("div",{staticClass:"container"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h1",[e("b-icon",{attrs:{icon:"envelope"}}),t._v(" Solicitudes")],1)]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"container col-lg-8 col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h2",[e("b-icon",{attrs:{icon:"journal-arrow-up"}}),t._v(" Formulario de pago de matricula ")],1)]),e("div",{staticClass:"card-body"},[e("b-form",[e("b-alert",{attrs:{show:t.dismissCountDown,variant:"danger"},on:{"dismiss-count-down":t.countDownChanged}},[e("strong",[t._v("Error. "+t._s(t.error)+",")]),t._v(" ocultando en "+t._s(t.dismissCountDown)+" segundos... ")]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Programa:")])]),e("b-form-select",{staticClass:"form-control",attrs:{options:t.programas,disabled:null!=t.id,required:""},model:{value:t.datos.idProgram,callback:function(e){t.$set(t.datos,"idProgram",e)},expression:"datos.idProgram"}})],1),e("div",{staticClass:"form-group my-3"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Monto:")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.datos.amount,expression:"datos.amount"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Ingrese monto",required:""},domProps:{value:t.datos.amount},on:{input:function(e){e.target.composing||t.$set(t.datos,"amount",e.target.value)}}})]),e("div",{staticClass:"form-group my-3"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Banco:")])]),e("b-form-select",{staticClass:"form-control",attrs:{options:t.bancos,required:""},model:{value:t.datos.bank,callback:function(e){t.$set(t.datos,"bank",e)},expression:"datos.bank"}})],1),e("div",{staticClass:"form-group my-3"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Número de operación:")])]),e("input",{staticClass:"form-control",attrs:{type:"number",placeholder:"Ingrese número",required:""}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Imagen de voucher:")])]),e("b-form-file",{attrs:{type:"file","browse-text":"Buscar",placeholder:"Seleccionar una imagen aqui",accept:"image/*"},on:{change:t.previewImage}})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"exampleInputPassword1"}},[e("b",[t._v("Comentario:")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.datos.comment,expression:"datos.comment"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingrese comentario",required:""},domProps:{value:t.datos.comment},on:{input:function(e){e.target.composing||t.$set(t.datos,"comment",e.target.value)}}})]),e("button",{staticClass:"btn form-control mt-2",staticStyle:{"background-color":"#1d425e",border:"none",color:"white"},attrs:{type:"button"},on:{click:function(e){return t.saveItem()}}},[t._v(" Enviar solicitud ")])],1)],1)])])])])])],1)},o=[],i=(a("14d9"),a("9612")),r=a("aedf"),n=(a("31dc"),{props:{id:{type:String,default:null}},data(){return{selected:"",imageData:null,uploadValue:0,error:"",dismissSecs:3,dismissCountDown:0,showDismissibleAlert:!1,datos:{idRegister:null,idProgram:null,amount:"",bank:null,document:"",comment:""},form:{email:"",name:"",food:null,checked:[]},foods:[{text:"-- Seleccione solicitud --",value:null}],bancos:[{text:"-- Seleccione banco --",value:null},"BCP","Banco de la Nación"],programas:[{text:"-- Seleccione Programa --",value:null},{text:"Seguridad Industrial y Minera",value:0x5d67e7867e122},{text:"Computación e Informática",value:0x5d67e7868d7d8},{text:"Marketing y Diseño Publicitario",value:0x5d67e78692c0d},{text:"Contabilidad Financiera Computarizada",value:0x5d67e78695f30}]}},created(){this.initialize()},methods:{previewImage(t){this.uploadValue=0,this.picture=null,this.imageData=t.target.files[0]},getFileExtension(t){return t.slice(2+(t.lastIndexOf(".")-1>>>0))},onUpload(){this.picture=null;var t=i["b"].v1()+"."+this.getFileExtension(""+this.imageData.name);const e=r["a"].storage().ref(t).put(this.imageData);return e.on("state_changed",t=>{this.uploadValue=t.bytesTransferred/t.totalBytes*100},t=>{console.log(t.message)},()=>{this.uploadValue=100,e.snapshot.ref.getDownloadURL().then(t=>{this.picture=t})}),t},countDownChanged(t){this.dismissCountDown=t},showAlert(t){this.error=t,this.dismissCountDown=this.dismissSecs},async initialize(){let t=await this.$axios.get("/requisition",{headers:{Authorization:"Bearer "+localStorage.token}}).catch(t=>{this.$errorQuery(t)});var e=[];for(var a in t.data){var s={text:t.data[a].type,value:t.data[a].id};e.push(s)}this.foods=this.foods.concat(e),this.datos.idProgram=this.id,this.datos.idRegister=1},async saveItem(){if(this.selected="circular",null!=this.imageData){var t=this.onUpload();null!=t&&(this.datos.document=t)}null!=this.datos.idRegister&&await this.$axios.post("/requisition",this.datos,{headers:{Authorization:"Bearer "+localStorage.token}}).then(()=>{this.selected="",this.$message.success("Envio exitoso!"),this.initialize()}).catch(t=>{this.selected="",this.showAlert(t.response.data.content)})}}}),l=n,d=(a("39ca"),a("2877")),c=Object(d["a"])(l,s,o,!1,null,null,null);e["default"]=c.exports},"0e2f":function(t,e,a){},"39ca":function(t,e,a){"use strict";a("0e2f")}}]);
//# sourceMappingURL=chunk-2449acfe.aa1bdc94.js.map